{
  "version": 3,
  "sources": ["../../src-frontend/press-apply.ts"],
  "sourcesContent": ["/**\n * Press Apply Page - Form Handling\n */\n\n// DOM Element Selectors\nconst pressApplyForm = document.getElementById('press-apply-form') as HTMLFormElement | null;\nconst pressFormMessage = document.getElementById('press-form-message') as HTMLDivElement | null;\n\n/**\n * Initialize Press Apply Form\n */\nfunction initPressApplyForm() {\n  if (!pressApplyForm || !pressFormMessage) {\n    return;\n  }\n\n  pressApplyForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    // Get form data\n    const name = (document.getElementById('press-name') as HTMLInputElement).value;\n    const mediaName = (document.getElementById('media-name') as HTMLInputElement).value;\n    const position = (document.getElementById('position') as HTMLInputElement).value;\n    const email = (document.getElementById('press-email') as HTMLInputElement).value;\n    const phone = (document.getElementById('press-phone') as HTMLInputElement).value;\n    const coverageContent = (document.getElementById('coverage-content') as HTMLTextAreaElement).value;\n    const publishDate = (document.getElementById('publish-date') as HTMLInputElement).value;\n    const pressDuration = (document.getElementById('press-duration') as HTMLSelectElement).value;\n    const note = (document.getElementById('press-note') as HTMLTextAreaElement).value;\n\n    // Validate required fields\n    if (!name || !mediaName || !email || !coverageContent || !pressDuration) {\n      showPressFormMessage('\u3059\u3079\u3066\u306E\u5FC5\u9808\u9805\u76EE\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002', 'error');\n      return;\n    }\n\n    // Map form data to API format\n    const formData = {\n      mediaName,\n      contactPerson: `${name}${position ? ` (${position})` : ''}`,\n      email,\n      phone,\n      coverageContent,\n      publicationDate: publishDate || undefined,\n      requiredPeriodStart: undefined as string | undefined, // Calculated from pressDuration\n      requiredPeriodEnd: undefined as string | undefined,   // Calculated from pressDuration\n      note\n    };\n\n    // Calculate period from pressDuration (e.g., \"7days\", \"14days\", \"30days\")\n    if (pressDuration) {\n      const days = parseInt(pressDuration.replace('days', ''));\n      const startDate = new Date();\n      const endDate = new Date();\n      endDate.setDate(endDate.getDate() + days);\n\n      formData.requiredPeriodStart = startDate.toISOString().split('T')[0];\n      formData.requiredPeriodEnd = endDate.toISOString().split('T')[0];\n    }\n\n    // Email validation\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(formData.email)) {\n      showPressFormMessage('\u6709\u52B9\u306A\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002', 'error');\n      return;\n    }\n\n    try {\n      // Show loading state\n      const submitButton = pressApplyForm.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n      const originalText = submitButton.textContent || '\u7533\u3057\u8FBC\u3080';\n      submitButton.disabled = true;\n      submitButton.textContent = '\u9001\u4FE1\u4E2D...';\n\n      // Submit to API\n      const response = await fetch('/api/press-application', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      });\n\n      const result = await response.json();\n\n      if (!response.ok) {\n        throw new Error(result.error || '\u9001\u4FE1\u306B\u5931\u6557\u3057\u307E\u3057\u305F');\n      }\n\n      // Show success message\n      showPressFormMessage(result.message, 'success');\n\n      // Reset form\n      pressApplyForm.reset();\n\n      // Reset submit button\n      submitButton.disabled = false;\n      submitButton.textContent = originalText;\n    } catch (error) {\n      console.error('Press apply form submission error:', error);\n      showPressFormMessage('\u9001\u4FE1\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002', 'error');\n\n      // Reset submit button\n      const submitButton = pressApplyForm.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n      submitButton.disabled = false;\n      submitButton.textContent = '\u7533\u3057\u8FBC\u3080';\n    }\n  });\n}\n\n/**\n * Display form message to user\n */\nfunction showPressFormMessage(message: string, type: 'success' | 'error') {\n  if (!pressFormMessage) return;\n\n  pressFormMessage.textContent = message;\n  pressFormMessage.className = `form-message ${type}`;\n  pressFormMessage.style.display = 'block';\n\n  // Scroll to message\n  pressFormMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n\n  // Auto-hide success messages after 5 seconds\n  if (type === 'success') {\n    setTimeout(() => {\n      if (pressFormMessage) {\n        pressFormMessage.style.display = 'none';\n      }\n    }, 5000);\n  }\n}\n\n// Initialize on DOM Content Loaded\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initPressApplyForm);\n} else {\n  initPressApplyForm();\n}\n\nexport { initPressApplyForm, showPressFormMessage };\n"],
  "mappings": "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",
  "names": []
}
