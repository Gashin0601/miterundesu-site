{
  "version": 3,
  "sources": ["../../src-frontend/store-apply.ts"],
  "sourcesContent": ["/**\n * Store Apply Page - Form Handling\n * \u5E97\u8217\u5C0E\u5165\u7533\u3057\u8FBC\u307F\u30D5\u30A9\u30FC\u30E0\n */\n\n// DOM Element Selectors\nconst storeApplyForm = document.getElementById('store-apply-form') as HTMLFormElement | null;\nconst storeFormMessage = document.getElementById('store-form-message') as HTMLDivElement | null;\n\n/**\n * Initialize Store Apply Form\n */\nfunction initStoreApplyForm() {\n  if (!storeApplyForm || !storeFormMessage) {\n    return;\n  }\n\n  storeApplyForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    // Get form elements\n    const storeNameEl = document.getElementById('store-name') as HTMLInputElement | null;\n    const industryEl = document.getElementById('industry') as HTMLSelectElement | null;\n    const posterTypeEl = document.querySelector('input[name=\"poster-type\"]:checked') as HTMLInputElement | null;\n    const locationEl = document.getElementById('location') as HTMLInputElement | null;\n    const emailEl = document.getElementById('store-email') as HTMLInputElement | null;\n    const phoneEl = document.getElementById('store-phone') as HTMLInputElement | null;\n    const noteEl = document.getElementById('store-note') as HTMLTextAreaElement | null;\n\n    // Get form data\n    const storeName = storeNameEl?.value.trim() || '';\n    const industry = industryEl?.value || '';\n    const posterType = posterTypeEl?.value || '';\n    const location = locationEl?.value.trim() || '';\n    const email = emailEl?.value.trim() || '';\n    const phone = phoneEl?.value.trim() || '';\n    const note = noteEl?.value.trim() || '';\n\n    // Validate required fields with specific messages\n    if (!storeName) {\n      showStoreFormMessage('\u5E97\u8217\u30FB\u65BD\u8A2D\u540D\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002', 'error');\n      storeNameEl?.focus();\n      return;\n    }\n\n    if (!industry) {\n      showStoreFormMessage('\u696D\u7A2E\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002', 'error');\n      industryEl?.focus();\n      return;\n    }\n\n    if (!posterType) {\n      showStoreFormMessage('\u30DD\u30B9\u30BF\u30FC\u7A2E\u985E\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002', 'error');\n      // Focus on first radio button\n      const firstRadio = document.getElementById('poster-green') as HTMLInputElement | null;\n      firstRadio?.focus();\n      return;\n    }\n\n    // Email validation (if provided)\n    if (email) {\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!emailRegex.test(email)) {\n        showStoreFormMessage('\u6709\u52B9\u306A\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002', 'error');\n        emailEl?.focus();\n        return;\n      }\n    }\n\n    const formData = {\n      storeName,\n      industry,\n      posterType,\n      location: location || undefined,\n      email: email || undefined,\n      phone: phone || undefined,\n      note: note || undefined\n    };\n\n    try {\n      // Show loading state\n      const submitButton = storeApplyForm.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n      const originalText = submitButton.textContent || '\u9001\u4FE1\u3059\u308B';\n      submitButton.disabled = true;\n      submitButton.textContent = '\u9001\u4FE1\u4E2D...';\n\n      // Submit to API\n      const response = await fetch('/api/store-application', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      });\n\n      const result = await response.json();\n\n      if (!response.ok) {\n        throw new Error(result.error || '\u9001\u4FE1\u306B\u5931\u6557\u3057\u307E\u3057\u305F');\n      }\n\n      // Show success message\n      showStoreFormMessage(result.message || '\u3054\u9023\u7D61\u3042\u308A\u304C\u3068\u3046\u3054\u3056\u3044\u307E\u3059\uFF01\\n\u78BA\u8A8D\u30E1\u30FC\u30EB\u3092\u304A\u9001\u308A\u3057\u307E\u3057\u305F\u306E\u3067\u3054\u78BA\u8A8D\u304F\u3060\u3055\u3044\u3002\\n2\u301C3\u55B6\u696D\u65E5\u4EE5\u5185\u306B\u62C5\u5F53\u8005\u3088\u308A\u3054\u9023\u7D61\u3055\u305B\u3066\u3044\u305F\u3060\u304D\u307E\u3059\u3002', 'success');\n\n      // Reset form\n      storeApplyForm.reset();\n\n      // Reset submit button\n      submitButton.disabled = false;\n      submitButton.textContent = originalText;\n    } catch (error) {\n      console.error('Store apply form submission error:', error);\n      const errorMessage = error instanceof Error ? error.message : '\u9001\u4FE1\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002';\n      showStoreFormMessage(errorMessage, 'error');\n\n      // Reset submit button\n      const submitButton = storeApplyForm.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n      submitButton.disabled = false;\n      submitButton.textContent = '\u9001\u4FE1\u3059\u308B';\n    }\n  });\n}\n\n/**\n * Display form message to user\n */\nfunction showStoreFormMessage(message: string, type: 'success' | 'error') {\n  if (!storeFormMessage) return;\n\n  storeFormMessage.textContent = message;\n  storeFormMessage.className = `form-message ${type}`;\n  storeFormMessage.style.display = 'block';\n\n  // Scroll to message\n  storeFormMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n\n  // Auto-hide success messages after 8 seconds\n  if (type === 'success') {\n    setTimeout(() => {\n      if (storeFormMessage) {\n        storeFormMessage.style.display = 'none';\n      }\n    }, 8000);\n  }\n}\n\n// Initialize on DOM Content Loaded\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initStoreApplyForm);\n} else {\n  initStoreApplyForm();\n}\n\nexport { initStoreApplyForm, showStoreFormMessage };\n"],
  "mappings": "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",
  "names": []
}
